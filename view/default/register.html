<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>MyWeb Regiter</title><script type="text/javascript" src="/static/js/jquery.js"></script><style type='text/css'>.none {display:none;}.fms .mmqd {width: 50px; color:black; text-align:center}</style></head><body class="bg"><div id="body" class="ah">	<div class="w9">		<div class="box"><p class="title">用户名注册</p>			<div id="fm1" class='panes'>				<div class="fms">					<form action="index.php?app=passport&act=register" method='post' name='myform' onsubmit='return register()'>					<input class='none' type='radio' name='reg_type' value='1' checked='checked' />					<p><span>用户名：</span><input onblur='is_registered(this.value)' type='text' name='username' id='username' class="ipt9" /> <b id='notice' style='color:red'></b></p>					<p><span>昵称（别名）：</span><input type='text' name='nick_name' id='nick_name' class="ipt9" /></p>					<p><span>性别：</span><select name='sex'>								<option value='0'>保密</option>								<option value='1'>男</option>								<option value='2'>女</option>						   </select>					</p>					<p><span>邮箱：</span><input type='text' name='email' id='email' class="ipt9" /></p>					<p><span>密码：</span><input onkeyup='checkIntensity(this.value)' type='password' name='password' id='password' class="ipt9" /></p>					<p><span>密码强度：</span><span class='mmqd' id='pwd_lower'>弱</span><span class='mmqd' id='pwd_middle'>中</span><span class='mmqd' id='pwd_high'>强</span></p>					<p><span>确认密码：</span><input type='password' name='comfirm_password' id='comfirm_password' class="ipt9" /></p>					<p><span>验证码：</span><input size='3' type='captcha' name='captcha' id='captcha' class="ipt9" />						<img onclick="this.src='__URL__/captcha'+'?'+Math.random()" src='__URL__/captcha' alt='no' title='no' />					</p>					<p><span>&nbsp;</span><input type="submit" name='submit' value="同意协议并注册" class="bt1" /></p>				</form>			</div>			<!-- 			<div class="fms">                    <form action="{:U('Spacecp/register')}" method='post' name='myform' onsubmit='return register()'>					<input class='none' type='radio' name='reg_type' value='2' checked='checked' />					<p><span>邮箱：</span><input type='text' name='email' id='email' /></p>					<p><span>昵称（别名）：</span><input type='text' name='nick_name' id='nick_name' /></p>					<p><span>性别：</span><select name='sex'>								<option value='0'>保密</option>								<option value='1'>男</option>								<option value='2'>女</option>						   </select>					</p>					<p><span>密码：</span><input type='password' name='password' id='password' /></p>					<p><span>确认密码：</span><input type='password' name='comfirm_password' id='comfirm_password' /></p>					<p><span>验证码：</span><input size='3' type='captcha' name='captcha' id='captcha' />						<img src='no:blank' alt='no' title='no' />					</p>					<p><span>&nbsp;</span><input type="submit" name='submit' value="同意协议并注册" class="bt1" /></p>				</form>			</div>			<div class="fms">                    <form action="{:U('Spacecp/register')}" method='post' name='myform' onsubmit='return register()'>					<input class='none' type='radio' name='reg_type' value='3' checked='checked' />					<p><span>手机号：</span><input type='text' name='cellphone' id='cellphone' /></p>					<p><span>昵称（别名）：</span><input type='text' name='nick_name' id='nick_name' /></p>					<p><span>性别：</span><select name='sex'>								<option value='0'>保密</option>								<option value='1'>男</option>								<option value='2'>女</option>						   </select>					</p>					<p><span>密码：</span><input type='password' name='password' id='password' /></p>					<p><span>确认密码：</span><input type='password' name='comfirm_password' id='comfirm_password' /></p>					<p><span>验证码：</span><input size='3' type='captcha' name='captcha' id='captcha' />						<img src='no:blank' alt='no' title='no' />					</p>					<p><span>&nbsp;</span><input type="submit" name='submit' value="同意协议并注册" class="bt1" /></p>				</form>			</div>			</div>			--><script>$(function() {	$("ul.tabs").tabs("div.panes > div",{  event: 'click'});});</script>		<!--#这里添加内容-->		</div>	</div></div><div class="cr"></div></body></html><script language='javascript'>/*window.onload = function() {	var r = document.getElementsByName('reg_type');	var j = r.length, name = 'e';	for (i = 0; i < r.length; i ++) {		if (r[i].checked) {			showtab(name, r[i].value, j);			break;		}	}}*///function showtab(name, t, j) {	//for (i = 1; i <= j; i ++) {		// var rs = document.getElementById('r_' + name + i);		// var as = document.getElementById('a_' + name + i);		// var es = document.getElementById(name + i);		// as.className = i == t ? 'hover' : '';		// es.style.display = i == t ? 'block' : 'none';		// rs.checked = i == t ? 'checked' : '';	//}//}function getCookie(name){    var arr = document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));    if(arr != null) return unescape(arr[2]); return null;}function radio_value(name) {	var r = document.getElementsByName(name);	for (i = 0; i < r.length; i ++) {		if (r[i].checked) {			return r[i].value;		}	}}function is_registered(username) {	$.ajax({		type : 'POST',		url : "{:U('Spacecp/is_registered')}",		dataType : 'JSON',		data : {			username:username,			csrf_test_name:getCookie('csrf_cookie_name')		},		cache : false,		beforeSend : function() {		},		success : function (json) {			if (json != '') {				$('#notice').html(json);				return false;			} else {				return true;			}		}	});}function register(){  var frm = document.forms['myform'];  var reg_type = radio_value('reg_type');    var msg = "";  if (reg_type == 1) {	var username  = $.trim(frm.elements['username'].value);    if (username.length < 2) {      msg += '用户名长度不能低于3位' + '\n';	} else if (username.length > 14) {	  msg += '用户名最长不能超过7个汉字' + '\n';    } else if (username.match(/^\s*$|^c:\\con\\con$|[%,\'\*\"\s\t\<\>\&\\]/)) {      msg += '用户名不能含有非法字符' + '\n';    }  }    /*  else if (reg_type == 2) {	var email = frm.elements['email'].value;	var reg = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)/;    if ( ! (reg.test(email))) {      msg += '邮箱验证不合法' + '\n';    }  } else {	var mobile = frm.elements['cellphone'].value;	var reg = /^1(3|5|8)\d{9}$/;	if ( ! (reg.test(mobile))) {		msg += '你输入的手机号码不合法' + '\n';	}  }  */    var nick_name = $.trim(frm.elements['nick_name'].value);  var sex = parseInt(frm.elements['sex'].value);  var password  = $.trim(frm.elements['password'].value);  var confirm_password = $.trim(frm.elements['comfirm_password'].value);  var captcha = $.trim(frm.elements['captcha'].value);   if (nick_name.length <= 0) {	msg += '昵称长度不能为空' + '\n';  } else if (nick_name.match(/^\s*$|^c:\\con\\con$|[%,\'\*\"\s\t\<\>\&\\]/)) {	msg += '昵称不能含有非法字符' + '\n';  }    if (password.length < 6) {    msg += '密码长度不能低于6位' + '\n';  } else if (/ /.test(password) == true) {	msg += '密码中不能含有空格' + '\n';  } else if (confirm_password != password ) {    msg += '两次密码输入不一致' + '\n';  }    if (captcha.length < 4) {	msg += '验证码长度不能低于4位' + '\n';  }  if (msg.length > 0) {    alert(msg);    return false;  } else {    return true;  }}function checkIntensity(pwd){  var Mcolor = "#FFF",Lcolor = "#FFF",Hcolor = "#FFF";  var m=0;  var Modes = 0;  for (i=0; i<pwd.length; i++)  {    var charType = 0;    var t = pwd.charCodeAt(i);    if (t>=48 && t <=57)    {      charType = 1;    }    else if (t>=65 && t <=90)    {      charType = 2;    }    else if (t>=97 && t <=122)      charType = 4;    else      charType = 4;    Modes |= charType;  }  for (i=0;i<4;i++)  {    if (Modes & 1) m++;      Modes>>>=1;  }  if (pwd.length<=4)  {    m = 1;  }  switch(m)  {    case 1 :      Lcolor = "2px solid red";      Mcolor = Hcolor = "2px solid #DADADA";    break;    case 2 :      Mcolor = "2px solid #f90";      Lcolor = Hcolor = "2px solid #DADADA";    break;    case 3 :      Hcolor = "2px solid #3c0";      Lcolor = Mcolor = "2px solid #DADADA";    break;    case 4 :      Hcolor = "2px solid #3c0";      Lcolor = Mcolor = "2px solid #DADADA";    break;    default :      Hcolor = Mcolor = Lcolor = "";    break;  }  if (document.getElementById("pwd_lower"))  {    document.getElementById("pwd_lower").style.borderBottom  = Lcolor;    document.getElementById("pwd_middle").style.borderBottom = Mcolor;    document.getElementById("pwd_high").style.borderBottom   = Hcolor;  }}</script>